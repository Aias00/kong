busted
busted /kong-plugin/
kong version
busted /kong-plugin/
cd /usr/local/share/lua/5.1/kong/tools/
l
ls -alFh
cd ..
ls -lafh
ls -lalFh
cd openid-connect/
ls
l
ls
ls -alFh
less .busted 
ls -alFh
busted /kong-plugin/spec/openid-connect/05-keycloak_spec.lua 
busted /kong-plugin/spec/openid-connect/05-keycloak_spec.lua --filter "refresh token"
http keycloak:8080/.well-known/openid-configuration
http keycloak:8080/auth/realms/demo/.well-known/openid-configuration
http :8000/
busted /kong-plugin/spec/openid-connect/05-keycloak_spec.lua --filter "refresh token"
busted /kong-plugin/spec/openid-connect/05-keycloak_spec.lua 
http v
asdasd
http http://keycloak:8080/auth/realms/demo/protocol/openid-connect/auth?redirect_uri=ht
tp%3A%2F%2F0.0.0.0%3A9000%2F&nonce=weTBV5t4waMRDN8Ml8Ce5zfw&response_mode=query&response_type=code
&code_challenge_method=S256&client_id=kong-client-secret&scope=openid&code_challenge=bHPKpkYKfAHng
vi /tmp/foo.sh
bash /tmp/foo.sh 
vi /tmp/foo.sh
busted /kong-plugin/spec/openid-connect/05-keycloak_spec.lua 
busted /kong-plugin/spec/openid-connect/05-keycloak_spec.lua --filter authorization
tp%3A%2F%2F0.0.0.0%3A9000%2F&nonce=weTBV5t4waMRDN8Ml8Ce5zfw&response_mode=query&response_type=code
busted /kong-plugin/spec/openid-connect/05-keycloak_spec.lua --filter authorization
lua
python
python3
ls
busted /kong-plugin/spec/openid-connect/05-keycloak_spec.lua --filter authorization
busted /kong-plugin/spec/openid-connect/05-keycloak_spec.lua --filter audience
busted /kong-plugin/spec/openid-connect/05-keycloak_spec.lua 
busted /kong-plugin/spec/openid-connect/05-keycloak_spec.lua --filter access
busted /kong-plugin/spec/openid-connect/05-keycloak_spec.lua --filter authorization
busted /kong-plugin/spec/openid-connect/05-keycloak_spec.lua --filter prohibits access due to mismatching scope
busted /kong-plugin/spec/openid-connect/05-keycloak_spec.lua --filter "prohibits access due to mismatching scope"
busted /kong-plugin/spec/openid-connect/05-keycloak_spec.lua --filter "grants access for matching"
busted /kong-plugin/spec/openid-connect/05-keycloak_spec.lua --filter "audience"
busted /kong-plugin/spec/openid-connect/05-keycloak_spec.lua --filter 'foobar'
:954
busted /kong-plugin/spec/openid-connect/05-keycloak_spec.lua --filter 'foobar'
busted /kong-plugin/spec/openid-connect/05-keycloak_spec.lua --filter 
busted /kong-plugin/spec/openid-connect/05-keycloak_spec.lua --filter fooconsumer
busted /kong-plugin/spec/openid-connect/05-keycloak_spec.lua --filter "foo headers"
busted /kong-plugin/spec/openid-connect/05-keycloak_spec.lua --filter "prohibits access due to mismatching scope claims"
find / -name 'access.log'
find / -name 'error.log'
busted /kong-plugin/spec/openid-connect/05-keycloak_spec.lua --filter "prohibits access due to mismatching scope claims"
busted /kong-plugin/spec/openid-connect/05-keycloak_spec.lua --filter "foobar"
busted /kong-plugin/spec/openid-connect/05-keycloak_spec.lua --filter "prohibits access due to mismatching audience"
busted /kong-plugin/spec/openid-connect/05-keycloak_spec.lua --filter "grants access for matching audience"
busted /kong-plugin/spec/openid-connect/05-keycloak_spec.lua --filter "authorization"
busted /kong-plugin/spec/openid-connect/05-keycloak_spec.lua --filter 'ACL plugin'
busted /kong-plugin/spec/openid-connect/05-keycloak_spec.lua --filter 'fooconsumer'
busted /kong-plugin/spec/openid-connect/05-keycloak_spec.lua --filter 'by Consumer'
busted /kong-plugin/spec/openid-connect/05-keycloak_spec.lua 
busted /kong-plugin/spec/openid-connect/05-keycloak_spec.lua --filter 'foo headers'
busted /kong-plugin/spec/openid-connect/05-keycloak_spec.lua --filter 'headers'
busted /kong-plugin/spec/openid-connect/05-keycloak_spec.lua --filter 'consumer'
ps aux
kill 74329
ps aux
busted /kong-plugin/spec/openid-connect/05-keycloak_spec.lua --filter 'consumer'
ps aux
busted /kong-plugin/spec/openid-connect/05-keycloak_spec.lua --filter 'consumer'
busted /kong-plugin/spec/openid-connect/05-keycloak_spec.lua 
busted /kong-plugin/spec/openid-connect/05-keycloak_spec.lua --filter 'debug'
busted /kong-plugin/spec/openid-connect/05-keycloak_spec.lua 
busted /kong-plugin/spec/openid-connect/05-keycloak_spec.lua --filter 'debug'
busted /kong-plugin/spec/openid-connect/05-keycloak_spec.lua --filter 'FTI-2737'
busted /kong-plugin/spec/openid-connect/05-keycloak_spec.lua --filter '2737'
busted /kong-plugin/spec/openid-connect/05-keycloak_spec.lua 
busted /kong-plugin/spec/openid-connect/05-keycloak_spec.lua --filter 'ACL'
http
http -v -a john:doe :8000
busted /kong-plugin/spec/openid-connect/05-keycloak_spec.lua --filter 'ACL'
http -v -a john:doe :8000
http -v -a john:doe :8000
busted /kong-plugin/spec/openid-connect/05-keycloak_spec.lua --filter 'ACL'
busted /kong-plugin/spec/openid-connect/05-keycloak_spec.lua --filter 'debug'
busted /kong-plugin/spec/openid-connect/05-keycloak_spec.lua --filter 'ACL'
busted /kong-plugin/spec/openid-connect/05-keycloak_spec.lua 
busted /kong-plugin/spec/openid-connect/05-keycloak_spec.lua --filter 'partially matching'
busted /kong-plugin/spec/openid-connect/05-keycloak_spec.lua 
busted /kong-plugin/spec/openid-connect/05-keycloak_spec.lua --filter '[OR]'
busted /kong-plugin/spec/openid-connect/05-keycloak_spec.lua --filter 'session'
busted /kong-plugin/spec/openid-connect/05-keycloak_spec.lua --filter 'is allowed with valid user session'
busted /kong-plugin/spec/openid-connect/05-keycloak_spec.lua --filter 'session'
busted /kong-plugin/spec/openid-connect/05-keycloak_spec.lua --filter 'client session'
busted /kong-plugin/spec/openid-connect/05-keycloak_spec.lua --filter '[compressed]'
busted /kong-plugin/spec/openid-connect/05-keycloak_spec.lua --filter 'compressed'
busted /kong-plugin/spec/openid-connect/05-keycloak_spec.lua --filter 'redis'
ping redis
busted /kong-plugin/spec/openid-connect/05-keycloak_spec.lua --filter 'redis'
busted /kong-plugin/spec/openid-connect/05-keycloak_spec.lua 
busted /kong-plugin/spec/openid-connect/05-keycloak_spec.lua --filter 'debug'
busted /kong-plugin/spec/openid-connect/05-keycloak_spec.lua --filter 'logout'
http http://keycloak:8080/auth/realms/demo/protocol/openid-connect/logout?id_token_hint=eyJhbGciOiJSUzI1NiIsInR5cCIgOiAiSldUIiwia2lkIiA6ICJuOERmVUR0VFRGY1FVN3I3aWM4TURoejJRUHZ6ajMtMy1hTE9JTjNoRjFrIn0.eyJleHAiOjE2MjkyODA4NDQsImlhdCI6MTYyOTI4MDU0NCwiYXV0aF90aW1lIjowLCJqdGkiOiJjZWY4YjNkMS03MjVkLTQ1NzItOTM3OS0yZWVhZjg1NTYxZmQiLCJpc3MiOiJodHRwOi8va2V5Y2xvYWs6ODA4MC9hdXRoL3JlYWxtcy9kZW1vIiwiYXVkIjoia29uZy1jbGllbnQtc2VjcmV0Iiwic3ViIjoiMjNlMWFmMTctYjFiZS00M2M5LWJlNGUtMDgyZWEzMWFiNTUzIiwidHlwIjoiSUQiLCJhenAiOiJrb25nLWNsaWVudC1zZWNyZXQiLCJzZXNzaW9uX3N0YXRlIjoiYjE5YTVlZmYtYzlhMC00OWQ4LWIzZGItMzMyMWYxOTdhMzI1IiwiYXRfaGFzaCI6InpwX1lIaDM5emZiR1VmSEdfZmlrRUEiLCJhY3IiOiIxIiwic2lkIjoiYjE5YTVlZmYtYzlhMC00OWQ4LWIzZGItMzMyMWYxOTdhMzI1IiwiZW1haWxfdmVyaWZpZWQiOnRydWUsIm5hbWUiOiJKb2huIERvZSIsInByZWZlcnJlZF91c2VybmFtZSI6ImpvaG4iLCJnaXZlbl9uYW1lIjoiSm9obiIsImZhbWlseV9uYW1lIjoiRG9lIiwiZW1haWwiOiJqb2huLmRvZUBrb25naHEuY29tIn0.bf0zj6pqRgzf69QOnHwOGy6SGxAXwKpEj4QCm27izvcui9JnmN8QmfWVCMylqNTF5sHrV3i_JWLgGtjF61lxSsCqsY_NabbWEG-FGSIYttimkRN4lrQcacmzn1Ehb5NeL3cONG7Sdn-Gr8RDBIk5FiHOZxPfOyNSKQE2rWOV0qKZwesdqKBLwzGcEqP8eRBxfuqwqB0zdfTamBHmLZzoyQurVSDabekkdifan2yu9-MZyoKXAg86JYloAJD6haQ88JsWIhs0H4IZG8GHnL9V9-u7iKaXvp--_Au49Ptgh37vn4mQePeji46IwUyZfOT1QBROPQI7LOvGbe-5wkD0Dw
busted /kong-plugin/spec/openid-connect/05-keycloak_spec.lua --filter 'logout'
ping keycloak
http://keycloak:8080/auth/realms/demo/protocol/openid-connect/logout?id_token_hint=
eyJhbGciOiJSUzI1NiIsInR5cCIgOiAiSldUIiwia2lkIiA6ICJuOERmVUR0VFRGY1FVN3I3aWM4TURoejJRUHZ6ajMtMy1hTE9JTjNoRjFrIn0.eyJleHAiOjE2MjkyODE3OTAsImlhdCI6MTYyOTI4MTQ5MCwiYXV0aF90aW1lIjowLCJqdGkiOiJiY2
Q3OTUyYy1lZTk0LTQwYTQtYjViYi1kNGU3YzNmMjU1NTUiLCJpc3MiOiJodHRwOi8va2V5Y2xvYWs6ODA4MC9hdXRoL3JlY
Wxtcy9kZW1vIiwiYXVkIjoia29uZy1jbGllbnQtc2VjcmV0Iiwic3ViIjoiMjNlMWFmMTctYjFiZS00M2M5LWJlNGUtMDgy
ZWEzMWFiNTUzIiwidHlwIjoiSUQiLCJhenAiOiJrb25nLWNsaWVudC1zZWNyZXQiLCJzZXNzaW9uX3N0YXRlIjoiODNlYjE
xZGYtMmMzZC00ZmMzLWI3OGUtNTI4YjFmNTZkYjlmIiwiYXRfaGFzaCI6IkhBeElsa1hFa0taZ0RXM1VNTE5VTmciLCJhY3
IiOiIxIiwic2lkIjoiODNlYjExZGYtMmMzZC00ZmMzLWI3OGUtNTI4YjFmNTZkYjlmIiwiZW1haWxfdmVyaWZpZWQiOnRyd
WUsIm5hbWUiOiJKb2huIERvZSIsInByZWZlcnJlZF91c2VybmFtZSI6ImpvaG4iLCJnaXZlbl9uYW1lIjoiSm9obiIsImZh
bWlseV9uYW1lIjoiRG9lIiwiZW1haWwiOiJqb2huLmRvZUBrb25naHEuY29tIn0.U9aWK4ITNLwSbaVnsBen87wu1WBGVk2
6gj6SCWXNwR6KEYeu3JjI7-8UAMJA8qOdVhfmr_a6YrKRb8VeBISpCX7B87LVRpujV9W8HgXtl2ycbCQpgz7zhL5yZ-lj99
XFcYFMJDbZ7Msz0t9Mh2wvH01wtqF-RvUnKVqmVsXcsYO32Wue2mM1XSwCfwQO4UZvv_M75qqL49bVjEYa-RaVcaShYq2Xu
nuX95T592HX0OGeM0UGVKmSoVonNtxuby2DXGVKRXkZpBWkG1VdmNN9X0Wx7YiMs5vC3-xTvoPuuy9MJDezpkqdG3eOU3Qn
http "http://keycloak:8080/auth/realms/demo/protocol/openid-connect/logout?id_token_hint=
eyJhbGciOiJSUzI1NiIsInR5cCIgOiAiSldUIiwia2lkIiA6ICJuOERmVUR0VFRGY1FVN3I3aWM4TURoejJRUHZ6ajMtMy1hTE9JTjNoRjFrIn0.eyJleHAiOjE2MjkyODE3OTAsImlhdCI6MTYyOTI4MTQ5MCwiYXV0aF90aW1lIjowLCJqdGkiOiJiY2
Q3OTUyYy1lZTk0LTQwYTQtYjViYi1kNGU3YzNmMjU1NTUiLCJpc3MiOiJodHRwOi8va2V5Y2xvYWs6ODA4MC9hdXRoL3JlY
Wxtcy9kZW1vIiwiYXVkIjoia29uZy1jbGllbnQtc2VjcmV0Iiwic3ViIjoiMjNlMWFmMTctYjFiZS00M2M5LWJlNGUtMDgy
ZWEzMWFiNTUzIiwidHlwIjoiSUQiLCJhenAiOiJrb25nLWNsaWVudC1zZWNyZXQiLCJzZXNzaW9uX3N0YXRlIjoiODNlYjE
xZGYtMmMzZC00ZmMzLWI3OGUtNTI4YjFmNTZkYjlmIiwiYXRfaGFzaCI6IkhBeElsa1hFa0taZ0RXM1VNTE5VTmciLCJhY3
IiOiIxIiwic2lkIjoiODNlYjExZGYtMmMzZC00ZmMzLWI3OGUtNTI4YjFmNTZkYjlmIiwiZW1haWxfdmVyaWZpZWQiOnRyd
WUsIm5hbWUiOiJKb2huIERvZSIsInByZWZlcnJlZF91c2VybmFtZSI6ImpvaG4iLCJnaXZlbl9uYW1lIjoiSm9obiIsImZh
bWlseV9uYW1lIjoiRG9lIiwiZW1haWwiOiJqb2huLmRvZUBrb25naHEuY29tIn0.U9aWK4ITNLwSbaVnsBen87wu1WBGVk2
6gj6SCWXNwR6KEYeu3JjI7-8UAMJA8qOdVhfmr_a6YrKRb8VeBISpCX7B87LVRpujV9W8HgXtl2ycbCQpgz7zhL5yZ-lj99
XFcYFMJDbZ7Msz0t9Mh2wvH01wtqF-RvUnKVqmVsXcsYO32Wue2mM1XSwCfwQO4UZvv_M75qqL49bVjEYa-RaVcaShYq2Xu
nuX95T592HX0OGeM0UGVKmSoVonNtxuby2DXGVKRXkZpBWkG1VdmNN9X0Wx7YiMs5vC3-xTvoPuuy9MJDezpkqdG3eOU3Qn
VxQM1zUc20ytA0hUhECc5DFdfg""
busted /kong-plugin/spec/openid-connect/05-keycloak_spec.lua --filter 'logout'
busted /kong-plugin/spec/openid-connect/05-keycloak_spec.lua --filter 
busted /kong-plugin/spec/openid-connect/05-keycloak_spec.lua 
busted /kong-plugin/spec/openid-connect/05-keycloak_spec.lua --filter 'refresh'
busted /kong-plugin/spec/openid-connect/05-keycloak_spec.lua --filter 'introspection'
busted /kong-plugin/spec/openid-connect/05-keycloak_spec.lua --filter 'refresh'
busted /kong-plugin/spec/openid-connect/05-keycloak_spec.lua 
gs
busted /kong-plugin/spec/openid-connect/05-keycloak_spec.lua 
busted
busted /kong-plugin/spec/openid-connect/05-keycloak_spec.lua 
busted /kong-plugin/spec/openid-connect/05-keycloak_spec.lua --filter 'authorization code flow'
busted /kong-plugin/spec/openid-connect/05-keycloak_spec.lua --filter 'code flow'
gs
busted /kong-plugin/spec/openid-connect/05-keycloak_spec.lua --filter 'code flow'
curl http://keycloak:8080/auth/realms/demo/protocol/openid-connect/auth?client_id=kong-client-secret&code_challenge=8jVQgrvICGW_UVg-Skt9TQqyi8QB3U0ZmryeCuenkqA&response_type=code&
http http://keycloak:8080/auth/realms/demo/protocol/openid-connect/auth?client_id=kong-client-secret&code_challenge=8jVQgrvICGW_UVg-Skt9TQqyi8QB3U0ZmryeCuenkqA&response_type=code&
response_mode=form_post&nonce=d-5KSR6BsBgcQQ9JBmAea4Pc&redirect_uri=http%3A%2F%2F0.0.0.0%3A9000%2Fcode-flow&scope=openid&state=nSD3QqKwCSFH4r_pb4wfltHg&code_challenge_method=S256
vi /tmp/redirect
cat /tmp/redirect 
vi /tmp/redirect 
bash /tmp/redirect 
fg
vi /tmp/redirect 
bash /tmp/redirect 
cat /tmp/redirect 
bash /tmp/redirect 
vi /tmp/redirect 
fg
:q!
fg
vi /tmp/redirect 
bash /tmp/redirect 
vi /tmp/redirect 
busted /kong-plugin/spec/openid-connect/05-keycloak_spec.lua --filter 'code flow'
vi /tmp/red
cat /tmp/re
cat /tmp/red
http http://keycloak:8080/auth/realms/demo/protocol/openid-connect/auth?client_id=kong-client-secret&code_challenge=8jVQgrvICGW_UVg-Skt9TQqyi8QB3U0ZmryeCuenkqA&response_type=code&response_mode=form_post&nonce=d-5KSR6BsBgcQQ9JBmAea4Pc&redirect_uri=http%3A%2F%2F0.0.0.0%3A9000%2Fcode-flow&scope=openid&state=nSD3QqKwCSFH4r_pb4wfltHg&code_challenge_method=S256
http "http://keycloak:8080/auth/realms/demo/protocol/openid-connect/auth?client_id=kong-client-secret&code_challenge=8jVQgrvICGW_UVg-Skt9TQqyi8QB3U0ZmryeCuenkqA&response_type=code&response_mode=form_post&nonce=d-5KSR6BsBgcQQ9JBmAea4Pc&redirect_uri=http%3A%2F%2F0.0.0.0%3A9000%2Fcode-flow&scope=openid&state=nSD3QqKwCSFH4r_pb4wfltHg&code_challenge_method=S256"
busted /kong-plugin/spec/openid-connect/05-keycloak_spec.lua --filter 'code flow'
curl "http://keycloak:8080/auth/realms/demo/protocol/openid-connect/auth?response_type=code&code_challenge_method=S256&code_challenge=eAIHlLq8wkOXrSl7Jd3ojTtMb0RbpzckrR2V5B3h2Xo&state=AwSa_yk4hfUA2d3i67If9jK8&client_id=kong-client-secret&redirect_uri=http%3A%2F%2F0.0.0.0%3A9000%2Fcode-flow&nonce=8Yxe8cr7qwB8B5kBkYHmWoX0&scope=openid&response_mode=form_post"
busted /kong-plugin/spec/openid-connect/05-keycloak_spec.lua --filter 'code flow'
http "http://keycloak:8080/auth/realms/demo/protocol/openid-connect/auth?nonce=aI32oLijq64QdwC_NP9g1XFA&code_challenge_method=S256&redirect_uri=http%3A%2F%2Fkong%3A9000%2Fcode-flow&client_id=kong-client-secret&code_challenge=La9In3HmHmcg-yfP44Ydt6elPqWHFVb0Nd4UyQBnGOQ&scope=openid&response_mode=form_post&response_type=code&state=tsOSyuETCrdywVCPt-1I6Isj"
http "http://keycloak:8080/auth/realms/demo/protocol/openid-connect/auth?nonce=aI32oLijq64QdwC_NP9g1XFA&code_challenge_method=S256&redirect_uri=http%3A%2F%2Fkong%3A9000%2Fcode-flow&client_id=kong-client-secret&code_challenge=La9In3HmHmcg-yfP44Ydt6elPqWHFVb0Nd4UyQBnGOQ&scope=openid&response_mode=form_post&response_type=code&state=tsOSyuETCrdywVCPt-1I6Isj" -v
busted /kong-plugin/spec/openid-connect/05-keycloak_spec.lua --filter 'code flow'
http "http://keycloak:8080/auth/realms/demo/protocol/openid-connect/auth?nonce=aI32oLijq64QdwC_NP9g1XFA&code_challenge_method=S256&redirect_uri=http%3A%2F%2Fkong%3A9000%2Fcode-flow&client_id=kong-client-secret&code_challenge=La9In3HmHmcg-yfP44Ydt6elPqWHFVb0Nd4UyQBnGOQ&scope=openid&response_mode=form_post&response_type=code&state=tsOSyuETCrdywVCPt-1I6Isj" -v
busted /kong-plugin/spec/openid-connect/05-keycloak_spec.lua --filter 'code flow'
http://keycloak:8080/auth/realms/demo/login-actions/authenticate?session_code=qGymRNk7-9RDrnsC7xmCHIkgSvVgjjNqHPp6YBvj
http POST http://keycloak:8080/auth/realms/demo/login-actions/authenticate?session_code=qGymRNk7-9RDrnsC7xmCHIkgSvVgjjNqHPp6YBvj
"http://keycloak:8080/auth/realms/demo/login-actions/authenticate?session_code=qGymRNk7-9RDrnsC7xmCHIkgSvVgjjNqHPp6YBvj
Z2o&amp;execution=8a4ba697-e0a1-4f53-80da-0e69c2ba24d5&amp;client_id=kong-client-secret&amp;tab_id=SPT_-3DiSAc"
http POST http://keycloak:8080/auth/realms/demo/login-actions/authenticate?session_code=qGymRNk7-9RDrnsC7xmCHIkgSvVgjjNqHPp6YBvjZ2o&amp;execution=8a4ba697-e0a1-4f53-80da-0e69c2ba24d5&amp;client_id=kong-client-secret&amp username=john password=doe -f
busted /kong-plugin/spec/openid-connect/05-keycloak_spec.lua --filter 'code flow'
http POST http://keycloak:8080/auth/realms/demo/login-actions/authenticate?session_code=qGymRNk7-9RDrnsC7xmCHIkgSvVgjjNqHPp6YBvjZ2o&amp;execution=8a4ba697-e0a1-4f53-80da-0e69c2ba24d5&amp;client_id=kong-client-secret&amp username=john password=doe -f
busted /kong-plugin/spec/openid-connect/05-keycloak_spec.lua --filter 'code flow'
"http://keycloak:8080/auth/realms/demo/login-actions/authenticate?session_code=pDjWBsyBb4kdWXhEOGmLIqSUNM4et8FlP_fiVN4Sxi4&amp;executio
n=8a4ba697-e0a1-4f53-80da-0e69c2ba24d5&amp;client_id=kong-client-secret&amp;tab_id=AoSSr725Ihk"
"http://keycloak:8080/auth/realms/demo/login-actions/authenticate?session_code=pDjWBsyBb4kdWXhEOGmLIqSUNM4et8FlP_fiVN4Sxi4&amp;executio
busted /kong-plugin/spec/openid-connect/05-keycloak_spec.lua --filter 'code flow'
clear
busted /kong-plugin/spec/openid-connect/05-keycloak_spec.lua --filter 'code flow'
vi /tmp/foo
cat /tmp/foo 
sh /tmp/foo 
bash /tmp/foo 
busted /kong-plugin/spec/openid-connect/05-keycloak_spec.lua --filter 'code flow'
http http://keycloak:8080/auth/realms/demo/protocol/openid-connect/auth?scope=openid&code_challenge_method=S256&client_
id=kong-client-secret&nonce=V950nk9nsS99SW9O0N1vgub1&response_mode=query&response_type=code&state=49gEw63XcWRB0sxzE_-WLUyd&red
vi /tmp/foo
bash /tmp/foo 
vi /tmp/foo
bash /tmp/foo 
id=kong-client-secret&nonce=V950nk9nsS99SW9O0N1vgub1&response_mode=query&response_type=code&state=49gEw63XcWRB0sxzE_-WLUyd&red
busted /kong-plugin/spec/openid-connect/05-keycloak_spec.lua --filter 'code flow'
http http://keycloak:8080/auth/realms/demo/protocol/openid-connect/auth?nonce=5IbyrLMhiuof18k0Z2xDzzhd&code_challenge=zQAm7FhCNeJAtAs42t0D2UI6hBvgmeWZNbRj80Xn3nM&state=yf8fNNwVIlyqn0aqGLSKvgBh&scope=openid&response_mode=query&redirect_uri=http%3A%2F%2Fkong%3A9000%2Fcode-flow&response_type=code&client_id=kong-client-secret&code_challenge_method=S256
http "http://keycloak:8080/auth/realms/demo/protocol/openid-connect/auth?nonce=5IbyrLMhiuof18k0Z2xDzzhd&code_challenge=zQAm7FhCNeJAtAs42t0D2UI6hBvgmeWZNbRj80Xn3nM&state=yf8fNNwVIlyqn0aqGLSKvgBh&scope=openid&response_mode=query&redirect_uri=http%3A%2F%2Fkong%3A9000%2Fcode-flow&response_type=code&client_id=kong-client-secret&code_challenge_method=S256"
http "http://keycloak:8080/auth/realms/demo/login-actions/authenticate?session_code=HsfZRzEwu400IXDTeSoTUFaAouqVByePifGvOHlAWXU&amp;execution=8a4ba697-e0a1-4f53-80da-0e69c2ba24d5&amp;client_id=kong-client-secret&amp;tab_id=oSj5dKvyrHw"
http "http://keycloak:8080/auth/realms/demo/login-actions/authenticate?session_code=HsfZRzEwu400IXDTeSoTUFaAouqVByePifGvOHlAWXU&amp;execution=8a4ba697-e0a1-4f53-80da-0e69c2ba24d5&amp;client_id=kong-client-secret&amp;tab_id=oSj5dKvyrHw" --follow
http POST "http://keycloak:8080/auth/realms/demo/login-actions/authenticate?session_code=HsfZRzEwu400IXDTeSoTUFaAouqVByePifGvOHlAWXU&amp;execution=8a4ba697-e0a1-4f53-80da-0e69c2ba24d5&amp;client_id=kong-client-secret&amp;tab_id=oSj5dKvyrHw" username=john password=doe
http POST "http://keycloak:8080/auth/realms/demo/login-actions/authenticate?session_code=HsfZRzEwu400IXDTeSoTUFaAouqVByePifGvOHlAWXU&amp;execution=8a4ba697-e0a1-4f53-80da-0e69c2ba24d5&amp;client_id=kong-client-secret&amp;tab_id=oSj5dKvyrHw" username=john password=doe -f
http POST "http://keycloak:8080/auth/realms/demo/login-actions/authenticate?session_code=HsfZRzEwu400IXDTeSoTUFaAouqVByePifGvOHlAWXU&amp;execution=8a4ba697-e0a1-4f53-80da-0e69c2ba24d5&amp;client_id=kong-client-secret&amp;tab_id=oSj5dKvyrHw" username=john password=doe --help
http POST "http://keycloak:8080/auth/realms/demo/login-actions/authenticate?session_code=HsfZRzEwu400IXDTeSoTUFaAouqVByePifGvOHlAWXU&amp;execution=8a4ba697-e0a1-4f53-80da-0e69c2ba24d5&amp;client_id=kong-client-secret&amp;tab_id=oSj5dKvyrHw" username=john password=doe -f
http POST "http://keycloak:8080/auth/realms/demo/login-actions/authenticate?session_code=HsfZRzEwu400IXDTeSoTUFaAouqVByePifGvOHlAWXU&amp;execution=8a4ba697-e0a1-4f53-80da-0e69c2ba24d5&amp;client_id=kong-client-secret&amp;tab_id=oSj5dKvyrHw" username=john password=doe -f --session foo
vi session.json
vim session.json
apt install vim
busted /kong-plugin/spec/openid-connect/05-keycloak_spec.lua --filter 'code flow'
http POST "http://keycloak:8080/auth/realms/demo/login-actions/authenticate?session_code=vRBA4zli4EAnBkdLE16RauT4--MlMkMvjIaxxl2rzCo&amp;execution=8a4ba697-e0a1-4f53-80da-0e69c2ba24d5&amp;client_id=kong-client-secret&amp;tab_id=XCidF2LiuKc" username=john password=doe -f
http POST "http://keycloak:8080/auth/realms/demo/login-actions/authenticate?session_code=vRBA4zli4EAnBkdLE16RauT4--MlMkMvjIaxxl2rzCo&amp;execution=8a4ba697-e0a1-4f53-80da-0e69c2ba24d5&amp;client_id=kong-client-secret&amp;tab_id=XCidF2LiuKc" username=john password=doe -f Session: AUTH_SESSION_ID=95c4998a-b066-4737-8626-22d1928a8098.c0b75668a373
http POST "http://keycloak:8080/auth/realms/demo/login-actions/authenticate?session_code=vRBA4zli4EAnBkdLE16RauT4--MlMkMvjIaxxl2rzCo&amp;execution=8a4ba697-e0a1-4f53-80da-0e69c2ba24d5&amp;client_id=kong-client-secret&amp;tab_id=XCidF2LiuKc" username=john password=doe -f Session:AUTH_SESSION_ID=95c4998a-b066-4737-8626-22d1928a8098.c0b75668a373
http POST "http://keycloak:8080/auth/realms/demo/login-actions/authenticate?session_code=vRBA4zli4EAnBkdLE16RauT4--MlMkMvjIaxxl2rzCo&amp;execution=8a4ba697-e0a1-4f53-80da-0e69c2ba24d5&amp;client_id=kong-client-secret&amp;tab_id=XCidF2LiuKc" username=john password=doe -f Session:"AUTH_SESSION_ID=95c4998a-b066-4737-8626-22d1928a8098.c0b75668a373"
http POST "http://keycloak:8080/auth/realms/demo/login-actions/authenticate?session_code=vRBA4zli4EAnBkdLE16RauT4--MlMkMvjIaxxl2rzCo&amp;execution=8a4ba697-e0a1-4f53-80da-0e69c2ba24d5&amp;client_id=kong-client-secret&amp;tab_id=XCidF2LiuKc" username=john password=doe -f 'Cookie:valued-visitor=yes;foo=bar'
http POST 'Cookie:valued-visitor=yes;foo=bar' "http://keycloak:8080/auth/realms/demo/login-actions/authenticate?session_code=vRBA4zli4EAnBkdLE16RauT4--MlMkMvjIaxxl2rzCo&amp;execution=8a4ba697-e0a1-4f53-80da-0e69c2ba24d5&amp;client_id=kong-client-secret&amp;tab_id=XCidF2LiuKc" username=john password=doe -f 
http POST 'Cookie:foo' "http://keycloak:8080/auth/realms/demo/login-actions/authenticate?session_code=vRBA4zli4EAnBkdLE16RauT4--MlMkMvjIaxxl2rzCo&amp;execution=8a4ba697-e0a1-4f53-80da-0e69c2ba24d5&amp;client_id=kong-client-secret&amp;tab_id=XCidF2LiuKc" username=john password=doe -f 
http POST  "http://keycloak:8080/auth/realms/demo/login-actions/authenticate?session_code=vRBA4zli4EAnBkdLE16RauT4--MlMkMvjIaxxl2rzCo&amp;execution=8a4ba697-e0a1-4f53-80da-0e69c2ba24d5&amp;client_id=kong-client-secret&amp;tab_id=XCidF2LiuKc" username=john password=doe -f 
busted /kong-plugin/spec/openid-connect/05-keycloak_spec.lua --filter 'code flow'
http POST mockbin.org/post x=b
http POST httpbin.org/post x=b
busted /kong-plugin/spec/openid-connect/05-keycloak_spec.lua --filter 'code flow'
curl "http://keycloak:8080/auth/realms/demo/protocol/openid-connect/auth?scope=openid&redirect_uri=http%3A%2F%2Fkong%3A9000%2Fcode-flow&nonce=KHdcCzlRyXxpFynYSkmbA24I&response_mode=form_post&client_id=kong-client-secret&state=MMNJOCBshsT2H5dpLLC4EGh-&code_challenge=gYTPFbdg1pXluhSHF2y1llnh82Y_8jGLvMr_eBaMI3M&code_challenge_method=S256&response_type=code" -c cookies.txt
cat cookies.txt 
curl -X POST -F "username=john" -F "password=doe" "http://keycloak:8080/auth/realms/demo/login-actions/authenticate?session_code=F8vFgLK9R1zjph16PvbQls_3c5xY_WHpsyAFJj-Jycc&amp;execution=8a4ba697-e0a1-4f53-80da-0e69c2ba24d5&amp;client_id=kong-client-secret&amp;tab_id=BmU8fjzKE_8" -b cookies.txt 
curl -X POST -F "username=john" -F "password=doe" "http://keycloak:8080/auth/realms/demo/login-actions/authenticate?session_code=F8vFgLK9R1zjph16PvbQls_3c5xY_WHpsyAFJj-Jycc&amp;execution=8a4ba697-e0a1-4f53-80da-0e69c2ba24d5&amp;client_id=kong-client-secret&amp;tab_id=BmU8fjzKE_8" -b cookies.txt  -v
curl "http://keycloak:8080/auth/realms/demo/protocol/openid-connect/auth?scope=openid&redirect_uri=http%3A%2F%2Fkong%3A9000%2Fcode-flow&nonce=KHdcCzlRyXxpFynYSkmbA24I&response_mode=form_post&client_id=kong-client-secret&state=MMNJOCBshsT2H5dpLLC4EGh-&code_challenge=gYTPFbdg1pXluhSHF2y1llnh82Y_8jGLvMr_eBaMI3M&code_challenge_method=S256&response_type=code" -c cookies.txt
curl "http://keycloak:8080/auth/realms/demo/protocol/openid-connect/auth?scope=openid&redirect_uri=http%3A%2F%2Fkong%3A9000%2Fcode-flow&nonce=KHdcCzlRyXxpFynYSkmbA24I&response_mode=form_post&client_id=kong-client-secret&state=MMNJOCBshsT2H5dpLLC4EGh-&code_challenge=gYTPFbdg1pXluhSHF2y1llnh82Y_8jGLvMr_eBaMI3M&code_challenge_method=S256&response_type=code" -c cookies.txt -v
curl -X POST -F "username=john" -F "password=doe" "http://keycloak:8080/auth/realms/demo/login-actions/authenticate?session_code=F8vFgLK9R1zjph16PvbQls_3c5xY_WHpsyAFJj-Jycc&amp;execution=8a4ba697-e0a1-4f53-80da-0e69c2ba24d5&amp;client_id=kong-client-secret&amp;tab_id=BmU8fjzKE_8" -b cookies.txt  -v
curl -X POST -F "username=john" -F "password=doe" "httpbin.org/post" -b cookies.txt  -v
curl -X POST -F "username=john" -F "password=doe" "httpbin.org/post" -b cookies.txt  
curl -X POST -F "username=john" -F "password=doe" "httpbin.org/post" -b cookies.txt   -v
cat cookies.txt 
curl -X POST -F "username=john" -F "password=doe" "httpbin.org/cookies" -b cookies.txt   -v
curl -X POST -F "username=john" -F "password=doe" "httpbin.org/post/cookies" -b cookies.txt   -v
busted /kong-plugin/spec/openid-connect/05-keycloak_spec.lua --filter 'code flow'
curl -X POST -F "username=john" -F "password=doe" "http://keycloak:8080/auth/realms/demo/protocol/openid-connect/auth?code_challenge_method=S256&response_type=code&response_mode=form_post&code_challenge=eA6B_ZAx4RzgfVIpk2D4yk8-r1Y5uslIHRZiH9iqOrY&nonce=XPtmnjgCp6L9veap0BOAgmG8&state=e7C8a1JWKI04RQzliMDGHJxN&scope=openid&client_id=kong-client-secret&redirect_uri=http%3A%2F%2Fkong%3A9000%2Fcode-flow" -b cookies.txt  -v
curl "http://keycloak:8080/auth/realms/demo/protocol/openid-connect/auth?code_challenge_method=S256&response_type=code&response_mode=form_post&code_challenge=eA6B_ZAx4RzgfVIpk2D4yk8-r1Y5uslIHRZiH9iqOrY&nonce=XPtmnjgCp6L9veap0BOAgmG8&state=e7C8a1JWKI04RQzliMDGHJxN&scope=openid&client_id=kong-client-secret&redirect_uri=http%3A%2F%2Fkong%3A9000%2Fcode-flow" -c cookies.txt
cat cookies.txt 
curl -X POST -F "username=john" -F "password=doe" http://keycloak:8080/auth/realms/demo/login-actions/authenticate?session_code=05e1Yuf5VwSDBsedtePbsgnrTJmGSwqgHTUaQpQamO0&amp;execution=8a4ba697-e0a1-4f53-80da-0e69c2ba24d5&amp;client_id=kong-client-secret&amp;tab_id=_lP-aymsXFg -b cookies.txt   -v
curl -X POST -F "username=john" -F "password=doe" "http://keycloak:8080/auth/realms/demo/login-actions/authenticate?session_code=05e1Yuf5VwSDBsedtePbsgnrTJmGSwqgHTUaQpQamO0&amp;execution=8a4ba697-e0a1-4f53-80da-0e69c2ba24d5&amp;client_id=kong-client-secret&amp;tab_id=_lP-aymsXFg" -b cookies.txt   -v
busted /kong-plugin/spec/openid-connect/05-keycloak_spec.lua --filter 'code flow'
